# Лучшие практики в RestFul

## Ключевые требования для API
Todo

## Коды состояний
Todo

## Принципы построения URL
Todo

## Документирование Api
Todo

## Версионирование Api
Todo

## Фильтрование, сортировка и поиск результатов
Todo

## Ограничение выводимых полей
Todo

## Представление ресурсов при их создании/обновлении
Todo ( хидер Location)

## Использование принципов HATEOAS
Todo

## Именование полей и свойств объектов
Todo

## Удобочитаемый вывод json
Todo

## Обертка тела ответа
Todo

## Постраничная навигация

Ранее одним из распространенных способов постраничной навигации являлось обертывание ответа и включение в обертку дополнительных свойств, включая навигационные ссылки:
```javascript
{
  "data": [
    ...
  ],
  "paging": {
    "next": "https://api.company.org/v1/cars/?page=3",
    "prev": "https://api.company.org/v1/cars/?page=1"
  }
}
```
Но в настоящее время более правильным является использование введенного в 2010 году в [RFC5988] заголовка Link
```javascript
Status: 200 OK
Link: <https://api.company.org/v1/cars/?page=3>; rel="next", <https://api.company.org/v1/cars/?page=10>; rel="last"

[ 
  {"element": {"id" : 1}},
  {"element": {"id": 2}}
]
```
АПИ, использующее заголовок Link поставляет подготовленные ссылки навигации в стандартизованном виде, таким образом разработчику клиента нет необходимости конструировать такие ссылки самостоятельно. Это особенно важно при постраничной навигации, основанной на курсоре.
```
first - ссылка на первую страницу
last  - ссылка на последнюю страницу
prev  - ссылка на предыдущую страницу
next  - ссылка на следующую страницу
```
В дополнение к этой информации допускается выводить дополнительную информацию в заголовках. Так, часто требуется информировать клиента об общем количестве записей. 
Для этого можно использовать заголовок `X-Total-Count`.

Для управления пагинацией также допускается использовать заголовки `Content-Range` ( [RFC2616](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.16) ) , например:
```sh
GET /cars?range=0-49

200 OK
Content-Range: 0-9/10
Accept-Range: car 50
[
..
]
```
где `Content-Range: 0-9/25` говорит о том, что возвращены записи с 0 по 9-ую, всего записей 25. Заголовок `Accept-Range` по RFC2616 требует указания сущности `car` (в http/1.1 допускается только bytes) и максимального размера выдачи, в нашем случае 50.

Если за один запрос вся информация не помещается в ответ, должен использоваться заголовок `206 Partial Content`
```sh
GET /cars?range=20-24

206 Partial Content
Content-Range: 20-24/25
Accept-Range: car 10
```

## Передача параметров POST, PUT, PATCH в теле запроса 
Todo

## Загрузка связанных сущностей
Todo

## Патчинг HTTP-метода 
Todo

## Ограничение нагрузки
Todo

## Аутентификация и авторизация
Todo

## Кэширование
Todo

## Вывод ошибок
Todo

## Использование X-заголовков 
Todo


## Полезные ресурсы
- http://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api
- http://blog.octo.com/en/design-a-rest-api/#pagination
- http://otac0n.com/blog/2012/11/21/range-header-i-choose-you.html

  [RFC5988]: http://tools.ietf.org/html/rfc5988#page-6
